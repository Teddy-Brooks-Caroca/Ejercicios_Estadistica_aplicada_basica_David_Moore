
Supongamos que tenemos datos ficticios sobre **horas de estudio (x)** y **nota obtenida (y)** para un grupo de estudiantes.

```r
# Paquetes
library(ggplot2)

# Datos simulados
set.seed(123)
horas <- 1:10
nota <- 50 + 5 * horas + rnorm(10, mean = 0, sd = 5)  # relación lineal con ruido
datos <- data.frame(horas, nota)

# Ajuste de la recta de regresión
modelo <- lm(nota ~ horas, data = datos)

# Resumen del modelo
summary(modelo)
```

Esto nos devuelve la estimación de la pendiente y la ordenada en el origen.  
La ecuación tendrá la forma:

$$  
\hat{y} = a + b \cdot x  
$$

donde **a** es la intersección y **b** la pendiente (cambio esperado en la nota por cada hora extra de estudio).

---

## Visualización de la recta ajustada

```r
# Gráfico de dispersión con recta de regresión
ggplot(datos, aes(x = horas, y = nota)) +
  geom_point(color = "blue", size = 3) +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  labs(
    title = "Relación entre horas de estudio y nota",
    x = "Horas de estudio",
    y = "Nota"
  ) +
  theme_minimal()
```

Este gráfico muestra:

- Los **puntos azules**: observaciones reales.
    
- La **línea roja**: predicción según el modelo de regresión lineal.
    

---

## Visualización de los residuos

Para ver cómo se calcula el error entre lo observado y lo predicho:

```r
# Calcular valores predichos y residuos
datos$predicho <- fitted(modelo)
datos$residuo <- resid(modelo)

# Gráfico con residuos
ggplot(datos, aes(x = horas, y = nota)) +
  geom_point(color = "blue", size = 3) +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  geom_segment(aes(xend = horas, yend = predicho), color = "gray") +
  labs(
    title = "Residuos en la regresión lineal",
    x = "Horas de estudio",
    y = "Nota"
  ) +
  theme_minimal()
```

Aquí, cada **segmento gris** representa un **residuo** (la diferencia entre el valor observado y el valor que predice la recta).  
La recta se construye de modo que la suma de los cuadrados de esos residuos sea mínima.

---

